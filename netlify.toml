# Netlify configuration file for PES Tournament Hub

# The [build] section defines how Netlify prepares your site for deployment.
[build]
  # This command tells Netlify to navigate into your 'backend' directory
  # and install its npm dependencies (like Express and WebSocket).
  command = "npm install --prefix backend"
  
  # This specifies the directory containing your serverless function code.
  # Netlify will find 'backend/server.js' and deploy it as a function named 'server'.
  functions = "backend/"

  # The directory with your site's static files. Since our Express server
  # will handle serving all files, we can just point this to the root.
  publish = "."

# The [[redirects]] section handles all routing rules for your site.
[[redirects]]
  # This is a "catch-all" rule. It captures every request coming to your site...
  from = "/*"
  
  # ...and internally forwards it to your main 'server' function.
  to = "/.netlify/functions/server"
  
  # The status 200 makes this a "rewrite," meaning the URL in the user's
  # browser doesn't change. It's seamless.
  status = 200
